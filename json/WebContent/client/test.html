<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	이름 :
	<input type="text" name="name" id="name" value="홍길동">
	<br> 아이디 :
	<input type="text" name="id" id="id" value="hong">
	<br> 비밀번호 :
	<input type="password" name="pwd" id="pwd" value="r1r2r3">
	<br> 성별 :
	<select name="trans" id="trans">
		<option value="1">남</option>
		<option value="2">여</option>
	</select>
	<br>
	<button data-json="/json/server/test.jsp">회원가입</button>
	<script>
	var btns = document.querySelectorAll('button[data-json]');
	for(var i=0;i<btns.length;i++){
		var btn = btns[i];
		btn.onclick = function(){
			var url = this.getAttribute('data-json');
			var xhr = new XMLHttpRequest();
			var name = document.querySelector('#name').value;
			var id = document.querySelector('#id').value;
			var pwd = document.querySelector('#pwd').value;
			var trans = document.querySelector('#trans').value;
			var param = {name:name, id:id, pwd:pwd, trans:trans};
			param = JSON.stringify(param);
			xhr.onreadystatechange = function(){
				if(xhr.readyState==xhr.DONE)
					
					if(xhr.status==200){
						var json = xhr.responseText;
						var list = JSON.parse(json);
						alert(list[0].name);
					}else{
						alert("뭔지 몰라도 실패");
					}
			}
			xhr.open('POST', url);
			xhr.send(param);
			
		}
		}
	
	
	
	
</script>
</body>
</html>